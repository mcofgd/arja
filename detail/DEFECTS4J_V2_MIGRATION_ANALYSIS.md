# Defects4J v2 è¿ç§»æ–¹æ¡ˆåˆ†æ

## æ–¹æ¡ˆæ¦‚è¿°

ç”¨æˆ·æè®®ï¼š**ä»Defects4J v3é™çº§åˆ°v2**ï¼Œä»¥è§£å†³Java 11å…¼å®¹æ€§å’Œspectraå¯¼å‡ºé—®é¢˜ã€‚

## å¯è¡Œæ€§åˆ†æ

### âœ… ä¼˜åŠ¿

1. **æ”¯æŒspectraå¯¼å‡º**
   - Defects4J v2æ”¯æŒ`defects4j export -p spectra`
   - å¯ä»¥ç›´æ¥è·å–GZoltaræ ¼å¼çš„æ•…éšœå®šä½æ•°æ®
   - é¿å…å¤æ‚çš„Cobertura XMLè§£æ

2. **Javaç‰ˆæœ¬çµæ´»æ€§**
   - v2æ”¯æŒJava 8-11
   - ä¸å¼ºåˆ¶ä½¿ç”¨Java 11
   - å¯ä»¥åœ¨Java 8ç¯å¢ƒä¸‹è¿è¡Œ

3. **ä¸åŸå§‹ARJAå…¼å®¹**
   - ARJAæœ€åˆå°±æ˜¯ä¸ºDefects4J v2è®¾è®¡çš„
   - GZoltarFaultLocalizerå¯ä»¥ç›´æ¥ä½¿ç”¨
   - æ— éœ€ä¿®æ”¹å¤§é‡ä»£ç 

### âŒ åŠ£åŠ¿å’Œé£é™©

1. **ç³»ç»Ÿå·²å®‰è£…v3**
   - å½“å‰ç³»ç»Ÿå·²æœ‰Defects4J v3.0.1
   - éœ€è¦å®Œå…¨å¸è½½å¹¶é‡æ–°å®‰è£…v2
   - å¯èƒ½å½±å“å…¶ä»–ä¾èµ–v3çš„é¡¹ç›®

2. **v2å·²åœæ­¢ç»´æŠ¤**
   - Defects4J v2æ˜¯æ—§ç‰ˆæœ¬
   - å®˜æ–¹æ¨èä½¿ç”¨v3
   - å¯èƒ½ç¼ºå°‘æ–°çš„bugä¿®å¤å’ŒåŠŸèƒ½

3. **æµ‹è¯•é¡¹ç›®å…¼å®¹æ€§**
   - å·²checkoutçš„Lang_1bç­‰é¡¹ç›®æ˜¯v3æ ¼å¼
   - éœ€è¦é‡æ–°checkoutæ‰€æœ‰æµ‹è¯•é¡¹ç›®
   - é¡¹ç›®ç»“æ„å¯èƒ½ä¸åŒ

4. **Mavenä¾èµ–é—®é¢˜**
   - Defects4J v2çš„Mavenä»“åº“å¯èƒ½ä¸å¯ç”¨
   - `https://defects4j.org/m2-repo`å¯èƒ½å·²å¤±æ•ˆ
   - éœ€è¦éªŒè¯ä¾èµ–æ˜¯å¦å¯ä¸‹è½½

## å½“å‰çŠ¶æ€æ£€æŸ¥

### å·²å®‰è£…çš„Defects4J
```bash
ä½ç½®: /home/x/defects4j
ç‰ˆæœ¬: v3.0.1 (åŸºäºæ–‡ä»¶æ—¥æœŸæ¨æµ‹)
Javaè¦æ±‚: Java 11
```

### å·²checkoutçš„é¡¹ç›®
```
/home/x/defects4j_test/Lang_1b - v3æ ¼å¼
/home/x/defects4j_test/Math_1b - v3æ ¼å¼
/home/x/defects4j_test/Chart_1 - v3æ ¼å¼
```

## æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆAï¼šç»§ç»­ä½¿ç”¨v3 + å®Œå–„Defects4JFaultLocalizerï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

**ä¼˜åŠ¿ï¼š**
- ä¸éœ€è¦é‡æ–°å®‰è£…Defects4J
- ä¸å½±å“å·²checkoutçš„é¡¹ç›®
- ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œæœ‰å®˜æ–¹æ”¯æŒ
- å·²å®Œæˆ85%çš„å·¥ä½œ

**åŠ£åŠ¿ï¼š**
- éœ€è¦å®ç°Cobertura XMLè§£æï¼ˆå‰©ä½™å·¥ä½œï¼‰
- éœ€è¦2-3å¤©å®Œæˆ

**é£é™©ï¼š** ä½

### æ–¹æ¡ˆBï¼šé™çº§åˆ°v2 + ä½¿ç”¨åŸå§‹GZoltarFaultLocalizer

**ä¼˜åŠ¿ï¼š**
- å¯ä»¥ä½¿ç”¨spectraå¯¼å‡º
- ä»£ç æ”¹åŠ¨å°‘
- ç†è®ºä¸Šæ›´ç®€å•

**åŠ£åŠ¿ï¼š**
- éœ€è¦å¸è½½v3ï¼Œå®‰è£…v2ï¼ˆ1å¤©ï¼‰
- éœ€è¦é‡æ–°checkoutæ‰€æœ‰æµ‹è¯•é¡¹ç›®ï¼ˆåŠå¤©ï¼‰
- éœ€è¦éªŒè¯v2åœ¨Java 11ä¸‹çš„å…¼å®¹æ€§ï¼ˆæœªçŸ¥ï¼‰
- Mavenä¾èµ–å¯èƒ½ä¸å¯ç”¨
- ä½¿ç”¨è¿‡æ—¶ç‰ˆæœ¬

**é£é™©ï¼š** ä¸­-é«˜

### æ–¹æ¡ˆCï¼šæ··åˆæ–¹æ¡ˆ - ä¿ç•™v3ï¼Œå•ç‹¬å®‰è£…v2

**ä¼˜åŠ¿ï¼š**
- ä¸¤ä¸ªç‰ˆæœ¬å…±å­˜
- å¯ä»¥å¯¹æ¯”æµ‹è¯•
- ä¸å½±å“ç°æœ‰ç¯å¢ƒ

**åŠ£åŠ¿ï¼š**
- ç¯å¢ƒå¤æ‚
- éœ€è¦ç®¡ç†ä¸¤å¥—Defects4J
- PATHå’Œç¯å¢ƒå˜é‡å†²çª

**é£é™©ï¼š** ä¸­

## æŠ€æœ¯éªŒè¯éœ€æ±‚

å¦‚æœé€‰æ‹©æ–¹æ¡ˆBï¼ˆé™çº§åˆ°v2ï¼‰ï¼Œéœ€è¦éªŒè¯ï¼š

### 1. Defects4J v2å¯ç”¨æ€§
```bash
# æ£€æŸ¥v2æ˜¯å¦è¿˜å¯ä»¥ä¸‹è½½
git clone https://github.com/rjust/defects4j.git defects4j-v2
cd defects4j-v2
git checkout v2.0.0  # æˆ–æœ€æ–°çš„v2.xæ ‡ç­¾
```

### 2. Mavenä¾èµ–å¯ç”¨æ€§
```bash
# æµ‹è¯•Mavenä»“åº“
curl -I https://defects4j.org/m2-repo/org/defects4j/defects4j-core/2.0.1/
```

### 3. Java 11å…¼å®¹æ€§
```bash
# åœ¨Java 11ç¯å¢ƒä¸‹æµ‹è¯•v2
export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64
defects4j-v2/framework/bin/defects4j info -p Lang
```

### 4. Spectraå¯¼å‡ºåŠŸèƒ½
```bash
# éªŒè¯spectraå¯¼å‡º
defects4j-v2/framework/bin/defects4j checkout -p Lang -v 1b -w /tmp/test
cd /tmp/test
defects4j-v2/framework/bin/defects4j coverage
defects4j-v2/framework/bin/defects4j export -p spectra
```

## æ¨èå†³ç­–

### ğŸ¯ æ¨èï¼šç»§ç»­æ–¹æ¡ˆAï¼ˆå®Œå–„Defects4JFaultLocalizerï¼‰

**ç†ç”±ï¼š**

1. **å·²å®Œæˆ85%** - åªå‰©Cobertura XMLè§£æ
2. **é£é™©æœ€ä½** - ä¸éœ€è¦é‡è£…ç¯å¢ƒ
3. **æ—¶é—´æœ€çŸ­** - 2-3å¤© vs 1.5å¤©+æœªçŸ¥é£é™©
4. **ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬** - æœ‰å®˜æ–¹æ”¯æŒå’Œbugä¿®å¤
5. **æŠ€æœ¯å€ºåŠ¡å°‘** - ä¸ä¾èµ–è¿‡æ—¶ç‰ˆæœ¬

### å¦‚æœåšæŒä½¿ç”¨v2ï¼Œå»ºè®®æ­¥éª¤ï¼š

1. **å…ˆéªŒè¯v2å¯ç”¨æ€§**ï¼ˆ1å°æ—¶ï¼‰
   - å…‹éš†v2ä»£ç 
   - æµ‹è¯•Java 11å…¼å®¹æ€§
   - éªŒè¯spectraå¯¼å‡º

2. **å¦‚æœéªŒè¯é€šè¿‡ï¼Œå†å†³å®šæ˜¯å¦è¿ç§»**
   - å¤‡ä»½å½“å‰ç¯å¢ƒ
   - å®‰è£…v2åˆ°ç‹¬ç«‹ç›®å½•
   - å¯¹æ¯”æµ‹è¯•ä¸¤ä¸ªç‰ˆæœ¬

3. **å¦‚æœéªŒè¯å¤±è´¥ï¼Œç»§ç»­æ–¹æ¡ˆA**
   - å®ŒæˆCoberturaè§£æå™¨
   - 2-3å¤©å®Œæˆå‰©ä½™å·¥ä½œ

## å®æ–½å»ºè®®

### ç«‹å³è¡ŒåŠ¨ï¼ˆæ¨èï¼‰
ç»§ç»­å®Œå–„Defects4JFaultLocalizerï¼š
1. å®ŒæˆCoberturaParserï¼ˆå·²åˆ›å»ºï¼‰
2. ä¿®å¤Defects4JFaultLocalizerçš„æ„é€ å‡½æ•°
3. å®ç°å®Œæ•´çš„Ochiaiè®¡ç®—
4. æµ‹è¯•éªŒè¯

### å¦‚æœè¦å°è¯•v2ï¼ˆå¯é€‰ï¼‰
å…ˆåšå¿«é€ŸéªŒè¯ï¼š
```bash
# 1. å…‹éš†v2
cd /tmp
git clone https://github.com/rjust/defects4j.git defects4j-v2
cd defects4j-v2
git checkout v2.0.0

# 2. åˆå§‹åŒ–
./init.sh

# 3. æµ‹è¯•
export PATH=/tmp/defects4j-v2/framework/bin:$PATH
defects4j info -p Lang

# 4. æµ‹è¯•spectraå¯¼å‡º
defects4j checkout -p Lang -v 1b -w /tmp/lang-test
cd /tmp/lang-test
defects4j coverage
defects4j export -p spectra
ls -la spectra  # æ£€æŸ¥æ˜¯å¦ç”Ÿæˆ
```

å¦‚æœéªŒè¯æˆåŠŸä¸”spectraæ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œå†è€ƒè™‘å®Œæ•´è¿ç§»ã€‚

## ç»“è®º

**å½“å‰æœ€ä¼˜æ–¹æ¡ˆï¼šç»§ç»­å®Œå–„Defects4JFaultLocalizerï¼ˆæ–¹æ¡ˆAï¼‰**

- é£é™©ä½
- æ—¶é—´çŸ­
- ä¸ç ´åç°æœ‰ç¯å¢ƒ
- ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬

**å¦‚æœç”¨æˆ·åšæŒå°è¯•v2ï¼š**
- å…ˆåšå¿«é€ŸéªŒè¯ï¼ˆ1å°æ—¶ï¼‰
- éªŒè¯æˆåŠŸå†å†³å®šæ˜¯å¦è¿ç§»
- ä¿ç•™v3ä½œä¸ºå¤‡ä»½

---
**æ—¥æœŸï¼š** 2025-12-08  
**ä½œè€…ï¼š** AI Assistant  
**ç‰ˆæœ¬ï¼š** 1.0